<div id="stories_chart"></div>
<div id= "container"></div>
<script>

  $(document).on("ready page:load", function(){
    $(function() {

      var options = {
          chart: {
            renderTo: "stories_chart",
            type: 'column',
            // type: 'line',
            spacingBottom: 35,
            spacingTop: 30,
            spacingLeft: 10,
            spacingRight: 15,
          },

          title: {
            text: "Stats"
          },

          subtitle: {
            text: "Check how popular your story is on SoundDrop"
          },
          
          xAxis: {
          },

          yAxis: {
            title: {text: "Likes"},
          },
          
          legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0,
          },

          tooltip: {
            valueSuffix: ' likes'
          },

          series: []
      };

      $.getJSON('/charts', function(response) { 
        // console.log(JSON.stringify(response));
        options.xAxis.categories = response.categories;
        options.series = response.stats.map(function(x) {
          return { "name": x.title, "data": x.votes }; 
        });
      
        var chart = new Highcharts.Chart(options);
      });
  });
});
      
// </script>


<script>
//   $(document).on("ready page:load", function(){
//     $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-v.json&callback=?', function (data) {
//       $('#container').highcharts('StockChart', {
//         chart: {
//           alignTicks: false
//         },

//         rangeSelector: {
//           selected: 1
//         },

//         title: {
//           text: 'AAPL Stock Volume'
//         },

//         series: [{
//           type: 'column',
//           name: 'AAPL Stock Volume',
//           data: data,
//           dataGrouping: {
//                         units: [[
//                             'week', // unit name
//                             [1] // allowed multiples
//                         ], [
//                             'month',
//                             [1, 2, 3, 4, 6]
//                         ]]
//                     }
//         }]
//       });
//   }); 
// });   
</script>
